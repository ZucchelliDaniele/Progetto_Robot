<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="../dist/output.css" rel="stylesheet">
		<script src="./main.js"></script>
		<script src="./time.js" type="module" ></script>
		<script src="./crypto.js"></script>
		<title>MecaPiFlex</title>
		<style>
			/* Hide the scrollbar */
			::-webkit-scrollbar {
			display: none; /* Hide the scrollbar in webkit (Chrome, Safari, Edge) */
			}
		</style>
	</head>
	<body class="bg-white-gray dark:bg-black-gray transition ease-in dark:ease-out duration-1000" id="body">
		<!-- header -->
		<h1 class="text-3xl font-bold bg-gray dark:bg-black transition ease-in dark:ease-out duration-700">
			<header>			
				<nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global">
				  <div class="flex lg:flex-1">
					<a class="-m-1.5 p-1.5" onclick="change_theme_color_local()">
					  <span class="sr-only">Your Company</span>
					  <img id="theme_mode" class="h-7 w-auto flex-none items-center justify-center rounded-lg bg-gray-50 hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black ring-gray" src="" alt="" onclick="change_theme_color()">
					</a>
				  </div>
				  <div class="flex lg:hidden">
					<button type="button" onclick="OpenMobileMenu()" class="-m-2.5 inline-flex items-center justify-center p-2.5 rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black ring-gray">
					  <span class="sr-only">Open main menu</span>
					  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
					  </svg>
					</button>
				  </div>
				  <!-- DropDown Menu Button -->
				  <div class="hidden lg:flex lg:gap-x-12">
					<div class="relative">
					  <button type="button" id="HeaderDropDownButton" class="flex items-center gap-x-1 text-sm font-semibold leading-6 dark:text-white" aria-expanded="false" onclick="DropDownMenu('HeaderDropDownMenu', 'HeaderDropDownButton', 'fixed', 'absolute', false, 'MenuArrow' )">
						Robot
						<svg class="h-5 w-5 flex-none" id="MenuArrow" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
						  <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
						</svg>
					  </button>
			  
					  <!--
						'Robot' flyout menu, show/hide based on flyout menu state.
			  
						Entering: "transition ease-out duration-200"
						  From: "opacity-0 translate-y-1"
						  To: "opacity-100 translate-y-0"
						Leaving: "transition ease-in duration-150"
						  From: "opacity-100 translate-y-0"
						  To: "opacity-0 translate-y-1"
					  -->

					  <!--
						DROP DOWN
					  -->

					  <div id="HeaderDropDownMenu"class="fixed -left-8 top-full z-10 mt-3 w-screen max-w-md overflow-hidden rounded-3xl bg-white-gray dark:bg-black-gray shadow-lg ring-1 ring-gray transition ease-in duration-150 opacity-0 translate-y-1">
						<div class="p-4">
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
								<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="index.html" class="block font-semibold  dark:text-white">
								Analytics
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1  dark:text-white">Get a better understanding of your robots usage</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
								<svg width="20" height="20" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16"> <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/> <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/> </svg>
							</div>
							<div class="flex-auto">
								<a href="./camera.html" class="block font-semibold dark:text-white">
									Camera
									<span class="absolute inset-0"></span>
								</a>
								<p class="mt-1 dark:text-white">Watch in real time what your robot is doing</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./security.html" class="block font-semibold dark:text-white">
								Security
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">See and change your account datas</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25A2.25 2.25 0 0010.5 18v-2.25a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25V18A2.25 2.25 0 006 20.25zm9.75-9.75H18a2.25 2.25 0 002.25-2.25V6A2.25 2.25 0 0018 3.75h-2.25A2.25 2.25 0 0013.5 6v2.25a2.25 2.25 0 002.25 2.25z" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./integrations.html" class="block font-semibold dark:text-white">
								Integrations
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">Connect or remove robots</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6 group-hover:text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./automations.html" class="block font-semibold dark:text-white inline-flex">
								Automations
								<span class="absolute inset-0"></span>
							  </a>
							  <a href="./automations.html" class="block dark:text-white inline-flex mt-1">
								+ GPT-4 Turbo
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">Make your robot do preinstalled moves</p>
							</div>
						  </div>
						</div>
						<div class="grid grid-cols-2 divide-x dark:text-white group-hover:bg-white group-hover:text-black">
						  <a href="#" class="flex items-center justify-center gap-x-2.5 p-3 text-sm font-semibold leading-6 hover:bg-gray-100 dark:text-white">
							<svg class="h-5 w-5 flex-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
							  <path fill-rule="evenodd" d="M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.39-2.908a.75.75 0 01.766.027l3.5 2.25a.75.75 0 010 1.262l-3.5 2.25A.75.75 0 018 12.25v-4.5a.75.75 0 01.39-.658z" clip-rule="evenodd" />
							</svg>
							Watch demo
						  </a>
						  <a href="https://mail.google.com/mail/u/1/?fs=1&to=zucchelli.daniele.studente@itispaleocapa.it&tf=cm" target="_blank" class="flex items-center justify-center gap-x-2.5 p-3 text-sm font-semibold leading-6 hover:bg-gray-100">
							<svg class="h-5 w-5 flex-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
							  <path fill-rule="evenodd" d="M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z" clip-rule="evenodd" />
							</svg>
							Contact Us
						  </a>
						</div>
					  </div>
					</div>
			  
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Features</a>
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Tutorials</a>
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Company</a>
				  </div>
				  <div class="hidden lg:flex lg:flex-1 lg:justify-end dark:text-white text-black">
					<img id="wifi" src="./images/0_wifi_white.png" class="h-7 my-1 mr-4">
					<h1 id="clock">NotWorking</h1>
				  </div>
				</nav>
				<!-- Mobile menu, show/hide based on menu open state. -->
				<div class="lg:hidden hidden" role="dialog" aria-modal="true" id="MobileMenu">
				  <!-- Background backdrop, show/hide based on slide-over state. -->
				  <div class="absolute inset-0 z-10"></div>
				  <div class="absolute inset-y-0 right-0 z-10 w-full bg-white-gray dark:bg-black-gray overflow-y-auto px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray dark:sm:ring-white transition ease-in dark:ease-out duration-1000">
					<div class="flex items-center justify-between">
					  <a class="-m-1.5 p-1.5">
						<span class="sr-only dark:text-white">Your Company</span>
						<img id="theme_mode_Mobile_Menu" class="h-7 w-auto rounded-lg hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black-gray ring-white-gray" src="" alt="" onclick="change_theme_color()">
					  </a>
					  <button type="button" onclick="CloseMobileMenu()" class="-m-2.5 rounded-lg p-2.5 ring-2 hover:ring-black dark:hover:ring-white dark:ring-black-gray ring-white-gray">
						<span class="sr-only dark:text-white">Close menu</span>
						<svg class="h-6 w-6 dark:text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
						  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
						</svg>
					  </button>
					</div>
					<div class="mt-6 flow-root">
					  <div class="-my-6 divide-y divide-gray-500/10">
						<div class="space-y-2 py-6">
						  <div class="-mx-3">
							<button type="button" onclick="DropDownMenu('MobileMenuDropdown', '  ', 'hidden', '  ', true, 'MobileMenuArrow')" class="mx-3 flex items-center gap-x-1 text-base font-semibold leading-7 dark:text-white" aria-controls="disclosure-1" aria-expanded="false">
							  Robot
							  <!-- DropDownMenu('HeaderDropDownMenu', 'HeaderDropDownButton', 'fixed', 'absolute', false, 'MenuArrow' )
								Expand/collapse icon, toggle classes based on menu open state.
			  
								Open: "rotate-180", Closed: ""
							  -->
							  <svg class="h-5 w-5 " viewBox="0 0 20 20" fill="currentColor" id="MobileMenuArrow" aria-hidden="true"> <!-- rotate the ^ on the mobile menu -->
								<path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
							  </svg>
							</button>
							<!-- 'Robot' sub-menu, show/hide based on menu state. -->
							<div class="mt-2 space-y-2 transition ease-out duration-200 opacity-0 translate-y-1 hidden" id="MobileMenuDropdown">
							  <a href="./index.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Analytics</a>
							  <a href="./camera.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Camera</a>
							  <a href="./security.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Security</a>
							  <a href="./integrations.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Integrations</a>
							  <a href="./automations.html" class="block inline-flex rounded-lg py-2 pl-6 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Automations +</a>
							  <a href="./automations.html" class="block inline-flex rounded-lg py-2 pr-3 text-sm mt-1 leading-7 dark:text-white hover:bg-gray-50">GPT-4 Turbo</a>
							  <a href="#" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Watch demo</a>
							  <a href="mailto:zucchelli.daniele.studente@itispaleocapa.it" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Contact Us</a>
							</div>
						  </div>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Features</a>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Tutorials</a>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Company</a>
						</div>
						<div class="py-6 dark:text-white">
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Exit</a>
						</div>
					  </div>
					</div>
				  </div>
				</div>
			  </header>			  
		  </h1>
		<!-- body -->
		<div class="py-2 px-3 grid gap-2 grid-cols-2" id="Body">
			<div class="grid grid-rows-2">
				<div>
					<div class="items-center min-w-fit min-h-full ring-2 rounded-xl m-6 flex flex-col ring-gray dark:ring-white-gray rounded-3xl">
						<div id="webcamDiv">
						</div>
						<div class="h-fit text-center dark:text-white mx-auto m-5 text-3xl font-bold">Line Follower</div>
					<div class="h-fit text-center dark:text-white mx-auto m-5 py-6 px-14 text-3xl font-bold ring-2 bg-green rounded-xl ring-green hover:cursor-pointer"
					onmousedown="if(this.innerHTML =='Start') {
						this.className='h-fit text-center dark:text-white mx-auto m-5 py-6 px-14 text-4xl font-bold ring bg-green rounded-xl ring-green hover:cursor-pointer'
					}
					else this.className='h-fit text-center dark:text-white mx-auto m-5 py-6 px-14 text-4xl font-bold ring bg-red  rounded-xl ring-red hover:cursor-pointer'"
					onmouseup="if(this.innerHTML =='Start') {
						this.className='h-fit text-center dark:text-white mx-auto m-5 py-6 px-14 text-3xl font-bold ring-2 bg-red rounded-xl ring-red hover:cursor-pointer'
					}
					else this.className='h-fit text-center dark:text-white mx-auto m-5 py-6 px-14 text-3xl font-bold ring-2 bg-green rounded-xl ring-green hover:cursor-pointer'"
					onclick="if(this.innerHTML =='Start') {
						this.innerHTML='Stop'
						line_follower('start')
					}
					else {
						this.innerHTML='Start'
						line_follower('stop')
					}
						"
					>Start</div>
					</div>
				</div>		
			</div>
			<div>
				<div class="overflow-hidden bg-gray dark:bg-black rounded-3xl ring-2 ring-black dark:ring-white flex-col items-center justify-center m-6 transition ease-in dark:ease-out duration-500">
                    <!-- TITLE -->
                    <div class="dark:text-white text-center text-2xl font-bold my-3">
                        <span>Chat GPT-4 Turbo</span>
                    </div>
                    <!-- TEXT -->
                    <div class="overflow-auto h-[70vh]" id="Chat">	
						<div class="dark:text-white mx-20 my-3 ring-2 rounded-3xl p-2 dark:ring-white ring-black flex flex-col-2">
							<div>
								<img class="h-8 inline-flex" src="./images/ai_white.png" id="Ai: 0">
							<h1 class="inline-flex text-2xl ml-2">System</h1>
							<h1 class="text-xl mt-3 ml-2">Insert password:</h1>
							<div class="flex my-3 w-72 ml-2 relative">
								<input 
									type="password"
									placeholder="Password..." 
									class="bg-white-gray dark:bg-black-gray ring-2 dark:ring-white dark:text-white text-black ring-black rounded-xl placeholder-black dark:placeholder-white p-2 w-72 focus:outline-0 focus:ring pr-10"
									id="PasswordInput"
								>
								<img 
									id="SendImage1"
									src="" 
									alt="Image" 
									class="cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray"
									onclick = "send_passwd()"
									onmousedown="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
									onmouseup="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
									>
							</div>
							<h1 class="text-xl mt-3 ml-2">Insert Code:</h1>
							<div class="flex my-3 w-72 ml-2 relative">
								<input 
									type="password"
									placeholder="Code..." 
									class="bg-white-gray dark:bg-black-gray ring-2 dark:ring-white dark:text-white text-black ring-black rounded-xl placeholder-black dark:placeholder-white p-2 w-72 focus:outline-0 focus:ring pr-10"
									id="CodeInput"
								>
								<img 
									id="SendImage2"
									src="" 
									alt="Image" 
									class="cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray"
									onclick = "send_code()"
									onmousedown="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
									onmouseup="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
									>
							</div>
							</div>
							<div class="items-center p-10">
								<span class="text-xl dark:text-white">
									For security reasons we save your Api key encrypting it using a password and a code. In order to save your api key to use Chatgpt, you need to insert the password and the code that you saved in the security window.
								</span>
							</div>
						</div>				
                    </div>
                    <!-- INPUT -->
                    <div class="flex items-center justify-center my-3 w-72 mx-auto relative">
                        <input 
                            type="text"
                            placeholder="Type here..." 
                            class="bg-white-gray dark:bg-black-gray ring-2 dark:ring-white dark:text-white text-black ring-black rounded-xl placeholder-black dark:placeholder-white p-2 w-72 focus:outline-0 focus:ring pr-10"
                            id="ChatInput"
                        >
                        <img 
							id="SendImage0"
                            src="" 
                            alt="Image" 
                            class="cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray"
                            onclick = "send_input()"
							onmousedown="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
							onmouseup="this.className = 'cursor-pointer absolute right-2 top-2 h-6 w-6 dark:hover:ring-white ring-2 rounded-lg hover:ring-black ring-white-gray dark:ring-black-gray'"
							>
                    </div>                                     
                </div>
                                                                           
			</div>
		</div>
	</body>
    <script>
		"use strict"
		function change_theme_color_local() {
			if (localStorage.theme === 'dark') {
				for(var i=0; i<3; i++) {
					document.getElementById("SendImage"+i).src = "images/send_white.png"
				}
				if(!window.ImgAvaiable) {
					document.getElementById("webcam").src = "./images/no_video_black.png"
				}
				// document.getElementById("webcam").src = "./images/no_video_black.png"
				
			} else{
				for(var i=0; i<3; i++) {
					document.getElementById("SendImage"+i).src = "images/send_black.png"
				}
				if(!window.ImgAvaiable) {
					document.getElementById("webcam").src = "./images/no_video_white.png"
				}
				// document.getElementById("webcam").src = "./images/no_video_white.png"
			}
			change_img_color()
		}
		window.onload = function() {
			if (localStorage.theme === 'dark') {
				for(var i=0; i<3; i++) {
					document.getElementById("SendImage"+i).src = "images/send_white.png"
				}
			} else{
				for(var i=0; i<3; i++) {
					document.getElementById("SendImage"+i).src = "images/send_black.png"
				}
			}
			if(!window.ImgAvaiable) {
				if (localStorage.theme === 'dark') {
					document.getElementById("webcam").src = "./images/no_video_black.png"
				
				} else{
					document.getElementById("webcam").src = "./images/no_video_white.png"
				}
			}
		}
        document.getElementById('ChatInput').addEventListener('keyup', function(event) {
            // Check if the Enter key (keyCode 13) is pressed
            if (event.key == "Enter") {
                // Clear the input value
                send_input();
            }
        });
        var isMobileView = window.matchMedia('(max-width: 1023px)').matches;
		if(isMobileView) {
			document.getElementById("Body").className = "py-2 px-3"
		}
		else {
			document.getElementById("Body").className = "py-2 px-3 grid gap-2 grid-cols-2"
		}
    </script>
	<script>
		"use strict"
		function ReloadVideo() {
			{
				// <img id="webcam" class="p-10 mx-auto align-center align-middle" src=getUrlWithNoPort()+":1809/stream.mjpg">
				var imageUrl = getUrlWithNoPort()+":1809/stream.mjpg";
				var img = new Image();
				window.ImgAvaiable = false;
		
				img.onload = function() {
				document.getElementById("webcamDiv").innerHTML = ""
				var video = document.createElement("img")
				video.src = getUrlWithNoPort()+":1809/stream.mjpg"
				video.id = "webcam"
				video.className = "hover:cursor-pointer p-10 mx-auto align-center align-middle"
				document.getElementById("webcamDiv").appendChild(video)
				console.log("Stream is available.");
				video.onclick = function() {
					window.location.href = "./camera.html"
				};
				document.getElementById("webcam").src = imageUrl;
				window.ImgAvaiable = true;
				clearInterval(video_interval);
				};
		
				img.onerror = function() {
				document.getElementById("webcamDiv").innerHTML = ""
				var video = document.createElement("img")
				video.id = "webcam"
				video.className = "hover:cursor-pointer p-10 mx-auto align-center align-middle"
				console.error("Error loading stream. It may be unavailable.");
				video.onclick = function() {
					ReloadVideo()
				};
				if(!window.ImgAvaiable) {
					if (localStorage.theme === 'dark') {
						video.src = "./images/no_video_black.png"
					} else{
						video.src = "./images/no_video_white.png"
					}
				}
				document.getElementById("webcamDiv").appendChild(video)
				};
		
				img.src = imageUrl;
			}
		}
		ReloadVideo()
		var video_interval = setInterval(() => {ReloadVideo();}, 10000);
		function getUrl() {
			const url = window.location.href;
			const parsedUrl = new URL(url);
			const baseUrl = `${parsedUrl.protocol}//${parsedUrl.host}`;
			return baseUrl;
		}
		function getUrlWithNoPort() {
			const url = window.location.href;

			const parsedUrl = new URL(url);
			const baseUrl = `${parsedUrl.protocol}//${parsedUrl.hostname}`;
			return baseUrl;
		}
	</script>
	<script>
		"use strict";
		var code = ""
		var passwd = ""
		var apiKey = ""
		document.getElementById('CodeInput').addEventListener('keyup', function(event) {
			// Check if the Enter key (keyCode 13) is pressed
			if (event.key == "Enter") {
				// Clear the input value
				send_code();
			}
		});
		document.getElementById('PasswordInput').addEventListener('keyup', function(event) {
			// Check if the Enter key (keyCode 13) is pressed
			if (event.key == "Enter") {
			// Clear the input value
				send_passwd();
			}
		});
		function sha256(input) {
			// Calculate SHA-256 hash
			var hash = CryptoJS.SHA256(input);

			// Convert the hash to a hexadecimal string
			var hashHex = hash.toString(CryptoJS.enc.Hex);

			return hashHex;
		}
		function send_code() {
			code = document.getElementById('CodeInput').value;
			document.getElementById('CodeInput').value = '';
			try_decrypt()
		}
		function send_passwd() {
			passwd = document.getElementById('PasswordInput').value;
			document.getElementById('PasswordInput').value = '';
			try_decrypt()
		}
		function try_decrypt() {
			if(code != "" && passwd != "") {
				if(localStorage.getItem("Api")) {
					apiKey = decrypt(localStorage.getItem("Api"), sha256(passwd), code)
					passwd = ""
					code = ""
				}
			}
		}
		function decrypt(ciphertext, password, salt) {
			var key = CryptoJS.PBKDF2(password, salt, { keySize: 256 / 32, iterations: 1000 });
			var iv = CryptoJS.enc.Hex.parse(password);
			var decrypted = CryptoJS.AES.decrypt(ciphertext, key, { iv: iv });
			return decrypted.toString(CryptoJS.enc.Utf8);
		}
		const endpoint = 'https://api.openai.com/v1/chat/completions';

		async function generateChatResponse(prompt) {
		const data = {
			model: 'gpt-3.5-turbo-0125',
			messages: [{ role: 'user', content: prompt }],
		};

		const response = await fetch(endpoint, {
			method: 'POST',
			headers: {
			'Content-Type': 'application/json',
			'Authorization': `Bearer ${apiKey}`,
			},
			body: JSON.stringify(data),
		});

		const result = await response.json();
		return result.choices[0].message.content;
		}

		var user_id_number = 0;
		var ai_id_number = 1;
		function send_input(){
			var message = document.getElementById('ChatInput').value;
			document.getElementById('ChatInput').value = '';
			if(message != "") {
				const chat = document.getElementById('Chat');
				const div_index = document.createElement('div');
				const div_text = document.createElement('div');
				const span = document.createElement('span');
				const img = document.createElement('img');
				const h1 = document.createElement('h1');
				div_index.className = "dark:text-white mx-20 my-3 flex items-center";
				img.className = "h-8 inline-flex"
				if (document.documentElement.classList.contains('dark')) {
					img.src = "./images/user_white.png"
				} else {
					img.src = "./images/user_black.png"
				}
				img.id = "UserIcon: " + user_id_number;
				h1.className = "inline-flex text-2xl ml-2"
				h1.innerHTML = "User"
				div_index.appendChild(img);
				div_index.appendChild(h1);
				chat.appendChild(div_index);
				div_text.className = "dark:text-white mx-24 my-3 flex items-center";
				span.className = "block text-base text-gray-500 mx-7";
				span.innerHTML = message;
				div_text.appendChild(span);
				chat.appendChild(div_text);
				user_id_number++;
				scrollToBottom()
				draw_text()
				generateChatResponse(message)
					.then(chatResponse => receive_input(chatResponse))
					.catch(error => console.error('Error:', error));
			}
		}
		function receive_input(message){
			var chat = document.getElementById('AiText: ' + (ai_id_number-1));
			chat.innerHTML = message;
			const response_img = document.createElement('img');
			if (localStorage.theme === 'dark') {
				response_img.src = "./images/response_white.png"
			
			} else{
				response_img.src = "./images/response_black.png"
			}
			response_img.id = "Response: " + (ai_id_number - 1);
			response_img.className = "h-6 my-1.5 hover:cursor-pointer hover:ring-2 rounded-lg dark:ring-white ring-black";
			response_img.addEventListener('click', function() {
				var message = (chat.innerHTML).replace(new RegExp('<img src="./images/response_white.png" id="'+response_img.id+'" class="h-6 my-1.5 hover:cursor-pointer hover:ring-2 rounded-lg dark:ring-white ring-black">', 'g'), '');
				message = message.replace(new RegExp('<img src="./images/response_black.png" id="'+response_img.id+'" class="h-6 my-1.5 hover:cursor-pointer hover:ring-2 rounded-lg dark:ring-white ring-black">', 'g'), '');
				document.getElementById('ChatInput').value = message;
			});
			chat.appendChild(response_img);
			scrollToBottom()
		}

		function draw_text(){
			const chat = document.getElementById('Chat');
			const div_index = document.createElement('div');
			const div_text = document.createElement('div');
			const span = document.createElement('span');
			const img = document.createElement('img');
			const h1 = document.createElement('h1');
			const loading = document.createElement('img');
			div_index.className = "dark:text-white mx-20 my-3 flex items-center";
			img.className = "h-8 inline-flex"
			if (document.documentElement.classList.contains('dark')) {
				img.src = "./images/ai_white.png"
			} else {
				img.src = "./images/ai_black.png"
			}
			img.id = "Ai: " + ai_id_number;
			h1.className = "inline-flex text-2xl ml-2"
			h1.innerHTML = "ChatGPT"
			div_index.appendChild(img);
			div_index.appendChild(h1);
			chat.appendChild(div_index);
			div_text.className = "dark:text-white mx-24 my-3 flex items-center";
			span.className = "block text-base text-gray-500 mx-7";
			span.id = "AiText: " + ai_id_number;
			loading.src = "./images/loading.gif"
			loading.className = "h-8 block"
			span.appendChild(loading);
			div_text.appendChild(span);
			chat.appendChild(div_text);
			ai_id_number++;
			scrollToBottom()
		}

		function change_img_color() {
			for(var i=0; i<user_id_number; i++) {
				var img = document.getElementById("UserIcon: " + i)
				if (document.documentElement.classList.contains('dark')) {
					img.src = "./images/user_white.png"
				} else {
					img.src = "./images/user_black.png"
				}
			}
			for(var i=0; i<ai_id_number; i++) {
				var img = document.getElementById("Ai: " + i)
				if (document.documentElement.classList.contains('dark')) {
					img.src = "./images/ai_white.png"
					if(i!=0) {
						if(document.getElementById("Response: " + i)) {
							document.getElementById("Response: " + i).src = "./images/response_white.png"
						}
					}
				} else {
					img.src = "./images/ai_black.png"
					if(i!=0) {
						if(document.getElementById("Response: " + i)) {
							document.getElementById("Response: " + i).src = "./images/response_black.png"
						}
					}
				}
			}
		}

		function scrollToBottom() {
			const chatContainer = document.getElementById("Chat");
			chatContainer.scrollTop = chatContainer.scrollHeight;
		}

		function sleep(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}

		function line_follower(state) {
			if(state =="start") console.log("Line follower started")
			else if(state == "stop") console.log("Line follower stopped")
		}
	</script>
</html>
