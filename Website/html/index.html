<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="../dist/output.css" rel="stylesheet">
		<script src="./main.js"></script>
		<script src="./time.js" type="module" ></script>
		<script src="./input.js" type="module" ></script>
		<script src="./server.js" type="module" ></script>
		<script src="./chart.js"></script>
		<title>RoboPi</title>
		<style>
			/* Hide the scrollbar */
			::-webkit-scrollbar {
			display: none; /* Hide the scrollbar in webkit (Chrome, Safari, Edge) */
			}
		</style>
	</head>
	<body class="test bg-white-gray dark:bg-black-gray transition ease-in dark:ease-out duration-1000">
		<!-- header -->
		<h1 class="text-3xl font-bold bg-gray dark:bg-black transition ease-in dark:ease-out duration-700">
			<header>			
				<nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global">
				  <div class="flex lg:flex-1">
					<a class="-m-1.5 p-1.5" onclick="change_theme_color_local()">
					  <span class="sr-only">Your Company</span>
					  <img id="theme_mode" class="h-7 w-auto flex-none items-center justify-center rounded-lg bg-gray-50 hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black ring-gray" src="" alt="" onclick="change_theme_color()">
					</a>
				  </div>
				  <div class="flex lg:hidden">
					<button type="button" onclick="OpenMobileMenu()" class="-m-2.5 inline-flex items-center justify-center p-2.5 rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black ring-gray">
					  <span class="sr-only">Open main menu</span>
					  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
					  </svg>
					</button>
				  </div>
				  <!-- DropDown Menu Button -->
				  <div class="hidden lg:flex lg:gap-x-12">
					<div class="relative">
					  <button type="button" id="HeaderDropDownButton" class="flex items-center gap-x-1 text-sm font-semibold leading-6 dark:text-white" aria-expanded="false" onclick="DropDownMenu('HeaderDropDownMenu', 'HeaderDropDownButton', 'fixed', 'absolute', false, 'MenuArrow' )">
						Robot
						<svg class="h-5 w-5 flex-none" id="MenuArrow" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
						  <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
						</svg>
					  </button>
			  
					  <!--
						'Robot' flyout menu, show/hide based on flyout menu state.
			  
						Entering: "transition ease-out duration-200"
						  From: "opacity-0 translate-y-1"
						  To: "opacity-100 translate-y-0"
						Leaving: "transition ease-in duration-150"
						  From: "opacity-100 translate-y-0"
						  To: "opacity-0 translate-y-1"
					  -->

					  <!--
						DROP DOWN
					  -->

					  <div id="HeaderDropDownMenu"class="fixed -left-8 top-full z-10 mt-3 w-screen max-w-md overflow-hidden rounded-3xl bg-white-gray dark:bg-black-gray shadow-lg ring-1 ring-gray transition ease-in duration-150 opacity-0 translate-y-1">
						<div class="p-4">
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
								<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="index.html" class="block font-semibold  dark:text-white">
								Analytics
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1  dark:text-white">Get a better understanding of your robots usage</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./input.html" class="block font-semibold dark:text-white">
								Movement
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">Move your robots as you please</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="#" class="block font-semibold dark:text-white">
								Security
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">See and change your account datas</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25A2.25 2.25 0 0010.5 18v-2.25a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25V18A2.25 2.25 0 006 20.25zm9.75-9.75H18a2.25 2.25 0 002.25-2.25V6A2.25 2.25 0 0018 3.75h-2.25A2.25 2.25 0 0013.5 6v2.25a2.25 2.25 0 002.25 2.25z" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./integrations.html" class="block font-semibold dark:text-white">
								Integrations
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">Connect or remove robots</p>
							</div>
						  </div>
						  <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50">
							<div class="flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 dark:text-white group-hover:bg-white group-hover:text-black">
							  <svg class="h-6 w-6 group-hover:text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
							  </svg>
							</div>
							<div class="flex-auto">
							  <a href="./automations.html" class="block font-semibold dark:text-white inline-flex">
								Automations
								<span class="absolute inset-0"></span>
							  </a>
							  <a href="./automations.html" class="block dark:text-white inline-flex mt-1">
								+ GPT-4 Turbo
								<span class="absolute inset-0"></span>
							  </a>
							  <p class="mt-1 dark:text-white">Make your robot do preinstalled moves</p>
							</div>
						  </div>
						</div>
						<div class="grid grid-cols-2 divide-x dark:text-white group-hover:bg-white group-hover:text-black">
						  <a href="#" class="flex items-center justify-center gap-x-2.5 p-3 text-sm font-semibold leading-6 hover:bg-gray-100 dark:text-white">
							<svg class="h-5 w-5 flex-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
							  <path fill-rule="evenodd" d="M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.39-2.908a.75.75 0 01.766.027l3.5 2.25a.75.75 0 010 1.262l-3.5 2.25A.75.75 0 018 12.25v-4.5a.75.75 0 01.39-.658z" clip-rule="evenodd" />
							</svg>
							Watch demo
						  </a>
						  <a href="https://mail.google.com/mail/u/1/?fs=1&to=zucchelli.daniele.studente@itispaleocapa.it&tf=cm" target="_blank" class="flex items-center justify-center gap-x-2.5 p-3 text-sm font-semibold leading-6 hover:bg-gray-100">
							<svg class="h-5 w-5 flex-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
							  <path fill-rule="evenodd" d="M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z" clip-rule="evenodd" />
							</svg>
							Contact Us
						  </a>
						</div>
					  </div>
					</div>
			  
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Features</a>
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Tutorials</a>
					<a href="#" class="text-sm font-semibold leading-6 dark:text-white">Company</a>
				  </div>
				  <div class="hidden lg:flex lg:flex-1 lg:justify-end dark:text-white text-black">
					<img id="wifi" src="./images/0_wifi_white.png" class="h-7 my-1 mr-4">
					<h1 id="clock">NotWorking</h1>
				  </div>
				</nav>
				<!-- Mobile menu, show/hide based on menu open state. -->
				<div class="lg:hidden hidden" role="dialog" aria-modal="true" id="MobileMenu">
				  <!-- Background backdrop, show/hide based on slide-over state. -->
				  <div class="absolute inset-0 z-10"></div>
				  <div class="absolute inset-y-0 right-0 z-10 w-full bg-white-gray dark:bg-black-gray overflow-y-auto px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray dark:sm:ring-white transition ease-in dark:ease-out duration-1000">
					<div class="flex items-center justify-between">
					  <a class="-m-1.5 p-1.5">
						<span class="sr-only dark:text-white">Your Company</span>
						<img id="theme_mode_Mobile_Menu" class="h-7 w-auto rounded-lg hover:cursor-pointer ring-2 hover:ring-black dark:hover:ring-white dark:ring-black-gray ring-white-gray" src="" alt="" onclick="change_theme_color()">
					  </a>
					  <button type="button" onclick="CloseMobileMenu()" class="-m-2.5 rounded-lg p-2.5 ring-2 hover:ring-black dark:hover:ring-white dark:ring-black-gray ring-white-gray">
						<span class="sr-only dark:text-white">Close menu</span>
						<svg class="h-6 w-6 dark:text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
						  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
						</svg>
					  </button>
					</div>
					<div class="mt-6 flow-root">
					  <div class="-my-6 divide-y divide-gray-500/10">
						<div class="space-y-2 py-6">
						  <div class="-mx-3">
							<button type="button" onclick="DropDownMenu('MobileMenuDropdown', '  ', 'hidden', '  ', true, 'MobileMenuArrow')" class="mx-3 flex items-center gap-x-1 text-base font-semibold leading-7 dark:text-white" aria-controls="disclosure-1" aria-expanded="false">
							  Robot
							  <!-- DropDownMenu('HeaderDropDownMenu', 'HeaderDropDownButton', 'fixed', 'absolute', false, 'MenuArrow' )
								Expand/collapse icon, toggle classes based on menu open state.
			  
								Open: "rotate-180", Closed: ""
							  -->
							  <svg class="h-5 w-5 " viewBox="0 0 20 20" fill="currentColor" id="MobileMenuArrow" aria-hidden="true"> <!-- rotate the ^ on the mobile menu -->
								<path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
							  </svg>
							</button>
							<!-- 'Robot' sub-menu, show/hide based on menu state. -->
							<div class="mt-2 space-y-2 transition ease-out duration-200 opacity-0 translate-y-1 hidden" id="MobileMenuDropdown">
							  <a href="./index.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Analytics</a>
							  <a href="./input.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Movement</a>
							  <a href="#" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Security</a>
							  <a href="./integrations.html" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Integrations</a>
							  <a href="./automations.html" class="block inline-flex rounded-lg py-2 pl-6 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Automations +</a>
							  <a href="./automations.html" class="block inline-flex rounded-lg py-2 pr-3 text-sm mt-1 leading-7 dark:text-white hover:bg-gray-50">GPT-4 Turbo</a>
							  <a href="#" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Watch demo</a>
							  <a href="mailto:zucchelli.daniele.studente@itispaleocapa.it" class="block rounded-lg py-2 pl-6 pr-3 text-sm font-semibold leading-7 dark:text-white hover:bg-gray-50">Contact Us</a>
							</div>
						  </div>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Features</a>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Tutorials</a>
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Company</a>
						</div>
						<div class="py-6 dark:text-white">
						  <a href="#" class="-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 dark:text-white hover:bg-gray-50">Exit</a>
						</div>
					  </div>
					</div>
				  </div>
				</div>
			  </header>			  
		  </h1>
		<!-- body -->
		<div class="py-2 px-3 grid gap-2 grid-cols-2" id="Body">
			<!-- 1 -->
			<div>
				<div>
					<canvas id="xy"></canvas>
				</div>
			</div>
			<!-- 2 -->
			<div>
				<div id="webcamJoystickDiv" class="grid grid-cols-2 min-w-fit">
					<div id="webcamDiv" class="items-center min-w-fit ring-2 ml-5 rounded-xl m-2 flex ring-gray dark:ring-white-gray rounded-3xl">
						<img id="webcam" class="p-10 mx-auto align-center align-middle" src="./images/no_video_white.png">
					</div>
					<div id="joy3Div">
							
					</div>
				</div>
			</div>
			<!-- 3 -->
			<div>
				<div>
					<canvas id="FlBr_FrBl"></canvas>
				</div>
			</div>
			<!-- 4 -->
			<div>
				<div>
					<canvas id="HoursChart"></canvas>
				</div>
			</div>
		</div>
	</body>
	
	<script type="module">
		//Joystick
		"use strict"
		import { createJoystick} from './input.js';
		var class_name;
		var isMobileView = window.matchMedia('(max-width: 1023px)').matches;
		if(isMobileView) {
			document.getElementById("webcamJoystickDiv").classList = "grid grid-rows-2 min-h-full min-w-full"
			class_name= "mx-auto items-center align-center hover:cursor-pointer ring-2 ring-gray dark:ring-white-gray rounded-3xl"
			document.getElementById("webcamDiv").classList ="items-center min-w-fit ring-2 rounded-xl my-4 mx-2 align-middle ring-gray dark:ring-white-gray rounded-3xl"
		
		}
		else {
			class_name = "float-right hover:cursor-pointer ring-2 ring-gray dark:ring-white-gray rounded-3xl my-4 mr-1"
			document.getElementById("webcamDiv").classList ="items-center min-w-fit ring-2 rounded-xl ml-8 m-2 align-middle ring-gray dark:ring-white-gray rounded-3xl"
		}
		document.addEventListener("DOMContentLoaded", function () {
    		createJoystick(class_name);
		});
		window.JoystickUpdate = function () {
			document.getElementById("joy3Div").innerHTML = ""
    		createJoystick(class_name)
		}
	</script>

	<script type="module">
		"use strict"
		import { X, Y } from './input.js';
		import { Fl, Fr, Bl, Br } from './input.js';
		import { hours, minutes, seconds} from './time.js';
		var days = ["18/12/2023", "19/12/2023", "20/12/2023", "21/12/2023", "22/12/2023", "23/12/2023", "24/12/2023"]
		var x = []
		var y = []
		var Fl_ = []
		var Fr_ = []
		var Bl_ = []
		var Br_ = []
		var time = 1;
		var labels = []
		{
			const now = new Date();
			var hours_start = now.getHours().toString().padStart(2, '0');
			var minutes_start = now.getMinutes().toString().padStart(2, '0');
			var seconds_start = now.getSeconds().toString().padStart(2, '0');
			for (let i = 0; i < 20; i++) {
				var nextSecond = (parseInt(seconds_start) + i) % 60;
				var nextMinute =
					parseInt(minutes_start) + Math.floor((parseInt(seconds_start) + i) / 60);
				var nextHour =
					(parseInt(hours_start) + Math.floor(nextMinute / 60)) % 24;
				
				if(nextMinute >= 60) {
					nextMinute = nextMinute % 60;
				}
				if(nextHour >= 24) {
					nextHour = nextHour % 24;
				}
				if(nextSecond >= 60) {
					nextSecond = nextSecond % 60;
				}

				labels.push(
					nextHour.toString().padStart(2, '0') + ":" +
					nextMinute.toString().padStart(2, '0') + ":" +
					nextSecond.toString().padStart(2, '0')
				);
			}
		}
		window.Charts = function(update = false) {
			var isMobileView = window.matchMedia('(max-width: 1023px)').matches;
			if(isMobileView) {
				document.getElementById("Body").className = "py-2 px-3"
			}
			else {
				document.getElementById("Body").className = "py-2 px-3 grid gap-2 grid-cols-2"
			}
			const xy = document.getElementById('xy');
			const FlBr_FrBl = document.getElementById('FlBr_FrBl');
			//XY Chart
			window.xyChart = new Chart(xy, {
			type: 'line',
			data: {
				labels: labels,
				datasets: 
				[{
					label: 'X',
					data: x,
					borderWidth: 2,
					// borderColor: '#36A2EB',
					// backgroundColor: '#9BD0F5',
					},
					{
					label: 'Y',
					data: y,
					borderWidth: 2,
					// borderColor: '#1da711',
					// backgroundColor: '#46eb37',
					}
				]
			},
			options: {
				scales: {
					x: {
						grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
					},
					y: {
						min: -100,
						max: 100,
						grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
					},
				},
				plugins: {
					legend: {
						position: 'top',
						display: true,
						labels: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#fff';
								} else {
									return '#747473';
								}
							},
						},
					},
					title: {
						display: true,
						text: 'JoyStick XY Coordinates',
						color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#ffffff';
								} else {
									return '#666666';
								}
							},
					}
				}
			}
			});
			//FlBr and FrBl Chart
			window.FlBr_FrBl_Chart = new Chart(FlBr_FrBl, {
			type: 'line',
			data: {
				labels: labels,
				datasets: 
				[{
					label: 'Fl',
					data: Fl_,
					borderWidth: 2,
					// borderColor: '#36A2EB',
					// backgroundColor: '#9BD0F5',
					},
					{
					label: 'Fr',
					data: Fr_,
					borderWidth: 2,
					// borderColor: '#1da711',
					// backgroundColor: '#46eb37',
					},
					{
					label: 'Bl',
					data: Bl_,
					borderWidth: 2,
					// borderColor: '#1da711',
					// backgroundColor: '#46eb37',
					},
					{
					label: 'Br',
					data: Br_,
					borderWidth: 2,
					// borderColor: '#1da711',
					// backgroundColor: '#46eb37',
					}
				]
			},
			options: {
				scales: {
					x: {
						grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
					},
					y: {
						min: -1,
						max: 1,
						grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
					},
				},
				plugins: {
					legend: {
						position: 'top',
						display: true,
						labels: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#ffffff';
								} else {
									return '#747473';
								}
							},
						},
					},
					title: {
						display: true,
						text: 'Front Left and Back Right Values and Front Right and Back Left Values',
						color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#ffffff';
								} else {
									return '#666666';
								}
							},
					}
				}
			}
			});
			//Update the chart of XY coordinates Joysticks
			const Hours = document.getElementById('HoursChart');
			window.HoursChart = new Chart(Hours, {
				type: 'bar',
				data: {
				labels: days,
				datasets: 
					[{
						label: 'Hours Standby',
						data: [0,3,4,1,5,6,3],
						borderWidth: 2,
						borderRadius: 5,
						borderSkipped: false,
						// borderColor: '#36A2EB',
						// backgroundColor: '#9BD0F5',
					},
					{
						label: 'Hours Moving',
						data: [1,2,5,2,4,7,2],
						borderWidth: 2,
						borderRadius: Number.MAX_VALUE,
						borderSkipped: false,
						// borderColor: '#36A2EB',
						// backgroundColor: '#9BD0F5',
					}
					]
				},
				options: {
					responsive: true,
					plugins: {
						legend: {
							position: 'top',
							display: true,
							labels: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#ffffff';
								} else {
									return '#747473';
								}
							},
						},
						},
						title: {
							display: true,
							text: 'Hours per day',
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#ffffff';
								} else {
									return '#666666';
								}
							},
						}
					},
					scales: {
						x: {
						grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
					},
						y: {
							min: 0,
							max: 24,
							grid: {
							color: function() {
								if (document.documentElement.classList.contains('dark')) {
									return '#707375';
								} else {
									return '#C8C6C2';
								}
							},
						}
						},
				}
				},
				});
		}
		Charts();
		window.change_theme_color_local = function() {
				if (localStorage.theme === 'dark') {
					document.getElementById("webcam").src = "./images/no_video_black.png"
				
				} else{
					document.getElementById("webcam").src = "./images/no_video_white.png"
				}
				var milliseconds = 0;
				const animationUpdate = setInterval(() => {
					HoursChart.update();
					if(milliseconds >= 1000) {
						clearInterval(animationUpdate);
					}
					milliseconds +=50;
				}, 50);
		}
		setInterval(() => {
				x.push(X);
				if (x.length > 19) {
					x.splice(0, 1);
				}
				y.push(Y);
				if (y.length > 19) {
					y.splice(0, 1);
				}
				time += 1;
				if(time > 20) {
					labels.push(hours+ ":" + minutes + ":" + seconds);
				}
				if(labels.length > 20) {
					labels.splice(0, 1);
				}
			}, 1000);
			//Update the chart of FlBr and FrBl Values
			setInterval(() => {
				Fl_.push(Fl);
				if (Fl_.length > 19) {
					Fl_.splice(0, 1);
				}
				Fr_.push(Fr);
				if (Fr_.length > 19) {
					Fr_.splice(0, 1);
				}
				Bl_.push(Bl);
				if (Bl_.length > 19) {
					Bl_.splice(0, 1);
				}
				Br_.push(Br);
				if (Br_.length > 19) {
					Br_.splice(0, 1);
				}
			}, 1000);

			setInterval(() => {
				xyChart.update();
			}, 100);

			setInterval(() => {
				FlBr_FrBl_Chart.update();
			}, 100);
	</script>
	<script>
		var loaded = false;
		window.onload = function() {
			loaded = true
			if (localStorage.theme === 'dark') {
				document.getElementById("webcam").src = "./images/no_video_black.png"
				
			} else{
				document.getElementById("webcam").src = "./images/no_video_white.png"
			}
		}
		window.addEventListener('resize', function(){ 
			if(loaded) {
				window.JoystickUpdate();
				window.xyChart.destroy();
				window.FlBr_FrBl_Chart.destroy();
				window.HoursChart.destroy();
				Charts();
			}
		});
	</script>
</html>

<!-- var ctx3 = document.getElementById('chart3').getContext('2d');
      var chart3 = new Chart(ctx3, {
        type: 'line',
        data: data,
        options: {
          aspectRatio: 1.75,
          layout: {
            padding: 14
          },
          legend: {
            labels: {
              fontColor: '#ccc',
              generateLabels: generateLabels,
              usePointStyle: true
            }
          },
          tooltips: {
            backgroundColor: 'rgba(255, 255, 255, 0.8)',
            titleFontColor: '#000',
            bodyFontColor: '#000'
          },
          scales: {
            xAxes: [{
              gridLines: {
                color: 'rgba(255, 255, 255, 0.2)',
                zeroLineColor: 'rgba(255, 255, 255, 0.5)'
              },
              ticks: {
                fontColor: '#ccc'
              }
            }],
            yAxes: [{
              gridLines: {
                color: 'rgba(255, 255, 255, 0.2)',
                zeroLineColor: 'rgba(255, 255, 255, 0.5)'
              },
              ticks: {
                fontColor: '#ccc'
              }
            }]
          },
          plugins: plugginOpts
        }
      }); -->